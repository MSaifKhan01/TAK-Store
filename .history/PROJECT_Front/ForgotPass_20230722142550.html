<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login form</title>
  <link rel="stylesheet" href="LoginSignup.css">
   <!-- Font Awesome Cdn Link -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
</head>
<body>
  <div class="wrapper">
    <h1>Welcome Again!</h1>
    <!-- <p>Welcome back you've <br> been missed!</p> -->
    <form>
      <input type="email" placeholder="Enter email" id="email">
      <input type="password" placeholder="Current Password" id="Currpass">
      <input type="password" placeholder="New Password" id="Newpass">
    <closeform></closeform></form>
    <button id="submit">Reset Password</button>
    <p class="or">
      ----- or continue with -----
    </p>
    <div class="icons">
      <a href="http://localhost:8000/user/auth/google">
        <i class="fab fa-google"></i>
        </a>
      <!-- <i class="fab fa-github"></i>
      <i class="fab fa-facebook"></i> -->
    </div>
    <div class="not-member">
     <a href="./login.html">Login here</a>
    </div>
  </div>
</body>
</html>


<script>
    document.getElementById("submit").addEventListener("click", () => {
     let email = document.getElementById("email").value;
     let CurrPassword = document.getElementById("Currpass").value;
     let NewPassword = document.getElementById("Newpass").value;

     let res = fetch("http://localhost:8000/user/login", {
       method: "PATCH",
       headers: {
         "content-type": "application/json",
       },
       body: JSON.stringify({CurrPassword,NewPassword }),
     })
       .then((res) => {
         return res.json();
       })
       .then((data) => {
         console.log(data);
         if(data.ok){
        //   sessionStorage.setItem("token", data.token);
        //   sessionStorage.setItem("name", data.name);
         
         alert("Password Updated!");
         window.location.href = "./login.html";
         }
         
       })
       .catch((err) => {
         console.log(err);
       });

  
   });
</script>
